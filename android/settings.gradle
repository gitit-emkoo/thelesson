rootProject.name = 'kimsaem'

pluginManagement {
    def reactNativePackage = ["node", "--print", "require.resolve('react-native/package.json')"].execute(null, rootDir).text.trim()
    def reactNativeGradlePluginDir = new File(["node", "--print", "require.resolve('@react-native/gradle-plugin/package.json', { paths: [reactNativePackage] })"].execute(null, rootDir).text.trim()).getParentFile()

    includeBuild(reactNativeGradlePluginDir)

    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
    }
}

plugins {
    id("com.facebook.react.settings") version "0.76.5"
}

// 전역 kotlinVersion 설정 (모든 프로젝트 평가 전에 설정)
// expo-modules-core가 평가되기 전에 반드시 설정되어야 함
gradle.beforeProject { project ->
    def kotlinVer = project.findProperty('expo.kotlin.version')
        ?: project.findProperty('KOTLIN_VERSION')
        ?: project.findProperty('android.kotlinVersion')
        ?: project.findProperty('kotlinVersion')
        ?: '1.9.25'
    project.ext.kotlinVersion = kotlinVer
    if (project == project.rootProject) {
        project.ext.kotlinVersion = kotlinVer
    }
}

apply from: new File(["node", "--print", "require.resolve('expo/package.json')"].execute(null, rootDir).text.trim(), "../scripts/autolinking.gradle")
useExpoModules()

include ':app'
